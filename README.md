---

```markdown
# ClawCloud 自动登录保活

## ⭐ Star 星星走起 动动发财手点点 ⭐

> 自动登录 ClawCloud，保持账户活跃，支持设备验证 + 两步验证

![设备验证](./3.png)

---

## ✨ 功能特性

- ✅ 自动登录 ClawCloud（通过 GitHub OAuth）
- ✅ 支持 **Mobile 验证**（手机批准）
- ✅ 支持 **2FA 验证**（TOTP 验证码）
- ✅ 自动更新 Cookie（无需手动维护）
- ✅ Telegram 通知（登录状态 + 验证提醒）
- ✅ 定时保活（每 5 天自动运行）

---

## ⚠️ 注意事项

| 项目 | 说明 |
|------|------|
| 首次运行 | 需要设备验证，收到 TG 通知后 **30 秒内** 批准 |
| REPO_TOKEN | 需要有 `repo` 权限才能自动更新 Secret |
| Cookie 有效期 | 每次运行都会更新，保持最新 |
| 2FA 验证码 | 在 Telegram 发送 `/code 123456` 即可 |

### Mobile 验证
![Mobile验证](./1.png)

### 2FA 验证码
![2FA验证](./4.png)

### 推荐设置（Mobile 优先）
![设置Mobile优先验证](./2.png)

---

## 🔐 Secrets 配置

| Secret 名称 | 必需 | 说明 |
|-------------|------|------|
| `GH_USERNAME` | ✅ | GitHub 用户名 |
| `GH_PASSWORD` | ✅ | GitHub 密码 |
| `GH_SESSION` | ❌ | 自动生成，无需手动添加 |
| `TG_BOT_TOKEN` | ❌ | Telegram Bot Token |
| `TG_CHAT_ID` | ❌ | Telegram Chat ID |
| `REPO_TOKEN` | ❌ | GitHub PAT（用于自动更新 Secret） |

### 获取 REPO_TOKEN

1. 访问 [GitHub Settings → Tokens](https://github.com/settings/tokens)
2. 点击 **Generate new token (classic)**
3. 勾选 `repo` 权限
4. 生成并复制 Token

---

## 🚀 快速开始

### 1️⃣ Fork 仓库

点击右上角 **Fork** 按钮

### 2️⃣ 配置 Secrets

进入 **Settings** → **Secrets and variables** → **Actions**

**必需配置：**
```
GH_USERNAME = 你的GitHub用户名
GH_PASSWORD = 你的GitHub密码
```

**推荐配置：**
```
TG_BOT_TOKEN = 123456:ABC-xxx
TG_CHAT_ID   = 你的ChatID
REPO_TOKEN   = ghp_xxxxxxxxxxxx
```

### 3️⃣ 启用 Actions

进入 **Actions** → 点击 **I understand my workflows, go ahead and enable them**

### 4️⃣ 手动测试

选择 **ClawCloud 自动登录保活** → **Run workflow** → **Run workflow**

---

## 📊 运行流程

```
┌─────────────────────────────────────────────────────────────┐
│                         开始                                 │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│              加载已保存的 Cookie（如果有）                    │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                     访问 ClawCloud                           │
└─────────────────────────────────────────────────────────────┘
                              ↓
                    ┌─────────────────┐
                    │    已登录？      │
                    └─────────────────┘
                     ↓是            ↓否
              ┌──────────┐    ┌──────────────┐
              │   保活    │    │点击GitHub登录│
              └──────────┘    └──────────────┘
                   ↓                  ↓
              ┌──────────┐    ┌──────────────┐
              │提取Cookie│    │ Cookie有效？  │
              └──────────┘    └──────────────┘
                   ↓           ↓是       ↓否
              ┌──────────┐  ┌──────┐  ┌────────────┐
              │   保存    │  │OAuth │  │输入用户名密码│
              └──────────┘  │ 授权  │  └────────────┘
                   ↓        └──────┘        ↓
              ┌──────────┐      ↓     ┌────────────┐
              │  完成 ✅  │      ↓     │ 需要验证？  │
              └──────────┘      ↓     └────────────┘
                               ↓            ↓是
                    ┌──────────────────────────────┐
                    │  发送 TG 通知，等待批准/验证码  │
                    └──────────────────────────────┘
                                    ↓
                         ┌──────────────────┐
                         │     登录成功      │
                         └──────────────────┘
                                    ↓
                         ┌──────────────────┐
                         │    OAuth 授权     │
                         └──────────────────┘
                                    ↓
                         ┌──────────────────┐
                         │ 重定向到 ClawCloud │
                         └──────────────────┘
                                    ↓
                         ┌──────────────────┐
                         │   保活 + 更新     │
                         └──────────────────┘
                                    ↓
                         ┌──────────────────┐
                         │    完成 ✅        │
                         └──────────────────┘
```

---

## 📁 文件结构

```
.
├── .github/
│   └── workflows/
│       └── auto_login.yml    # GitHub Actions 配置
├── scripts/
│   └── auto_login.py         # 自动登录脚本
├── 1.png                      # Mobile 验证截图
├── 2.png                      # 设置截图
├── 3.png                      # 主截图
├── 4.png                      # 2FA 截图
└── README.md
```

---

## 🐛 常见问题

### Q: 设备验证超时怎么办？
A: 确保 Telegram 通知已配置，收到通知后立即在邮箱或 GitHub App 批准。

### Q: 2FA 验证码怎么输入？
A: 在 Telegram 发送 `/code 123456`（替换为你的 6 位验证码）。

### Q: Cookie 更新失败？
A: 检查 `REPO_TOKEN` 是否有 `repo` 权限。

### Q: 为什么需要 GitHub 密码？
A: 用于 Cookie 失效时重新登录，密码存储在 GitHub Secrets 中，安全可靠。

---

## 📄 License

MIT License

---

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

⭐ 如果对你有帮助，请点个 Star 支持一下！
```

---
